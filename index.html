<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VY17C4ZK69"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-VY17C4ZK69');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hillel Senior Fund</title>
    <!-- UPDATED META DESCRIPTION for stronger search snippet influence -->
    <meta name="description" content="Support the Hillel Class of 2026 Senior Fund. Donate now to make the Israel trip, events, and graduation possible for every student. Play our Rolex Raffle or Split the Pot!">
    <meta name="keywords" content="Hillel, Senior Fund, Donate, Class of 2026">
    <meta name="author" content="Saul Setton">
    <link rel="icon" type="image/png" href="/favicon/favicon.jpeg">
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Schema Markup (JSON-LD) for WebSite and Sitelinks -->
    <!-- We've capitalized the domain here. While Google primarily uses the domain, this subtle hint can sometimes encourage Google to display a cleaner, capitalized version like HillelSeniors.com -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "url": "https://HillelSeniors.com/", 
      "name": "Hillel Senior Fund",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://HillelSeniors.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "mainEntityOfPage": {
        "@type": "CollectionPage",
        "name": "Quick Action Links",
        "description": "Direct links to the main fundraising sections and leaderboards.",
        "about": [
          {
            "@type": "Action",
            "name": "Split The Pot",
            "url": "https://HillelSeniors.com/split-the-pot/"
          },
          {
            "@type": "Action",
            "name": "Rolex Raffle",
            "url": "https://HillelSeniors.com/rolex-raffle/"
          },
          {
            "@type": "Action",
            "name": "Donate Now",
            "url": "https://HillelSeniors.com/donate/"
          },
          {
            "@type": "Action",
            "name": "Leaderboard",
            "url": "https://HillelSeniors.com/leaderboard/"
          }
        ]
      }
    }
    </script>
    
    <!-- BreadcrumbList Schema to influence the display name above the URL in search results -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Hillel Senior Fund",
          "item": "https://HillelSeniors.com/"
        }
      ]
    }
    </script>
    <!-- End Schema Markup. -->
    
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #050417 0%, #190a3a 45%, #341264 100%);
            --surface: rgba(24, 14, 52, 0.82);
            --surface-strong: rgba(17, 9, 41, 0.92);
            --surface-soft: rgba(45, 26, 86, 0.55);
            --accent: #ff8a3d;
            --accent-alt: #ff5fa0;
            --accent-secondary: #8c5cf6;
            --accent-glow: rgba(255, 95, 160, 0.45);
            --text-muted: #d8cfff;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-image: var(--bg-gradient);
            color: #ffffff;
        }

        .bebas-neue {
            font-family: 'Bebas Neue', sans-serif;
        }

        .glass-header {
            background: linear-gradient(120deg, rgba(25, 8, 58, 0.9), rgba(60, 16, 94, 0.7));
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 10px 35px rgba(9, 5, 30, 0.65);
        }

        .nav-link:hover {
            color: var(--accent) !important;
        }

        .brand-ring {
            box-shadow: 0 0 25px rgba(255, 95, 160, 0.35);
            border: 2px solid rgba(255, 138, 61, 0.65) !important;
        }

        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
        }

        .hero-overlay {
            background: radial-gradient(circle at top, rgba(140, 92, 246, 0.45), transparent 65%);
        }

        .accent-subheading {
            color: var(--accent-alt);
            text-transform: uppercase;
            letter-spacing: 0.15em;
        }

        .accent-button {
            background-image: linear-gradient(120deg, var(--accent) 0%, var(--accent-alt) 45%, var(--accent-secondary) 100%);
            color: #ffffff !important;
            box-shadow: 0 15px 35px rgba(255, 95, 160, 0.35);
            transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.3s ease;
        }

        .accent-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 45px rgba(255, 138, 61, 0.4);
            filter: brightness(1.05);
        }

        .accent-outline {
            border: 2px solid var(--accent);
            background: transparent;
            color: #ffffff !important;
            box-shadow: inset 0 0 0 0 rgba(255, 138, 61, 0.3);
            transition: color 0.3s ease, box-shadow 0.3s ease, transform 0.3s ease;
        }

        .accent-outline:hover {
            background-image: linear-gradient(120deg, rgba(255, 138, 61, 0.15), rgba(255, 95, 160, 0.2));
            box-shadow: inset 0 0 20px rgba(255, 95, 160, 0.35), 0 15px 35px rgba(9, 5, 30, 0.5);
            transform: translateY(-3px);
        }

        .feature-card {
            background: var(--surface);
            border-bottom: 4px solid transparent;
            border-image: linear-gradient(120deg, rgba(255, 138, 61, 0.6), rgba(255, 95, 160, 0.45)) 1;
            box-shadow: 0 20px 45px rgba(8, 6, 28, 0.55);
            position: relative;
            overflow: hidden;
        }

        .feature-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at top, rgba(140, 92, 246, 0.25), transparent 65%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-card:hover::after {
            opacity: 1;
        }

        .feature-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 28px 55px rgba(9, 5, 30, 0.6);
        }

        .support-panel {
            background: linear-gradient(120deg, rgba(36, 21, 68, 0.85), rgba(59, 27, 96, 0.65));
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: inset 0 0 35px rgba(140, 92, 246, 0.15);
        }

        .footer-link {
            color: var(--accent-alt);
        }

        .footer-link:hover {
            color: var(--accent);
        }

        .contact-card {
            background: var(--surface-soft);
            padding: 1.25rem;
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .input-field {
            background: rgba(19, 12, 36, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #fff;
            transition: border 0.3s ease, box-shadow 0.3s ease;
        }

        .input-field:focus {
            border-color: var(--accent-alt);
            box-shadow: 0 0 0 4px rgba(255, 95, 160, 0.25);
            outline: none;
        }

        .glow-card:hover {
            box-shadow: 0 0 35px var(--accent-glow);
        }

        @media (max-width: 767px) {
            #main-menu li {
                width: 100%;
            }

            #main-menu li a {
                text-align: center;
                padding: 0.75rem 1rem;
            }
        }
    </style>
</head>
<body class="text-white min-h-screen flex flex-col">

    <!-- Header (Updated with mobile toggle and glass effect) -->
    <header class="glass-header py-4 px-4 md:px-12 fixed w-full top-0 z-50 backdrop-blur-sm">
        <nav class="container mx-auto flex justify-between items-center flex-wrap md:flex-nowrap">
            <div class="flex items-center justify-between w-full md:w-auto">
                <!-- Logo: Increased touch target and added ring for visual pop -->
                <a href="/" class="flex items-center space-x-2">
                    <img src="https://raw.githubusercontent.com/ToratYosef/ToratYosef..github.io/refs/heads/main/assets/logos.jpeg" alt="Hillel Logo" class="h-14 sm:h-16 md:h-20 w-auto rounded-full p-1 brand-ring">
                </a>
                <!-- Mobile Menu Toggle Button -->
                <button id="menu-toggle" class="md:hidden text-white focus:outline-none" aria-label="Toggle menu">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>

            <!-- Navigation Links (Toggable on mobile, always visible on desktop) -->
            <ul id="main-menu" class="hidden md:flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-8 text-base font-semibold w-full md:w-auto mt-4 md:mt-0">
                <li><a href="/split-the-pot/" class="text-white nav-link transition-colors duration-300 block">Split the Pot</a></li>
                <li><a href="/rolex-raffle/" class="text-white nav-link transition-colors duration-300 block">Rolex Raffle</a></li>
                <!-- Leaderboard Link -->
                <li><a href="/leaderboard/" class="text-white nav-link transition-colors duration-300 block">Leaderboard</a></li>
                <!-- Donate button styling updated for block display on mobile -->
                <li><a href="/donate/" class="py-2 px-5 rounded-full accent-button font-bold block">Donate Now</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content Container -->
    <main class="flex-grow pt-24">
        
        <!-- Home Page (Only this page is active on the root URL) -->
        <section id="home" class="page-content active">
            <!-- Hero Section -->
            <div class="relative bg-cover bg-center h-screen min-h-[600px]" style="background-image: url('https://raw.githubusercontent.com/ToratYosef/ToratYosef..github.io/refs/heads/main/assets/kotel.jpg');">
                <!-- Overlay re-added to darken image for text visibility -->
                <div class="absolute inset-0 bg-slate-950/70 hero-overlay"></div>

                <div class="relative z-10 flex flex-col items-center justify-center h-full text-center p-4">
                    <h1 class="bebas-neue text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-bold text-white mb-4 drop-shadow-lg">
                        Support the Hillel Senior Fund
                    </h1>
                    <p class="text-lg md:text-2xl text-white mb-8 max-w-2xl">
                        Join us in building a bright future for the Hillel Class of 2026. Your generous contribution makes a world of difference.
                    </p>
                    
                    <!-- New Button Header/CTA -->
                    <h2 class="bebas-neue text-2xl sm:text-3xl font-bold mb-6 drop-shadow-md accent-subheading">
                        Choose How You Support Our Seniors:
                    </h2>

                    <!-- Dual Buttons for Spin and Split the Pot - Outline and Centered -->
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6">
                        <!-- Rolex Raffle Button - Updated with flexbox for perfect centering -->
                        <a id="spin-action-button" href="/rolex-raffle/"
                            class="w-full sm:w-60 py-4 px-8 md:text-lg lg:text-xl rounded-full
                                   accent-outline font-bold
                                   shadow-lg transform transition-all duration-300 hover:scale-105
                                   flex items-center justify-center">
                            Rolex Raffle
                        </a>
                        <!-- Buy Split The Pot Tickets Button - Updated with flexbox for perfect centering -->
                        <a id="split-action-button" href="/donate/"
                            class="w-full sm:w-60 py-4 px-8 md:text-lg lg:text-xl rounded-full
                                   accent-button font-bold
                                   shadow-lg transform transition-all duration-300 hover:scale-105
                                   flex items-center justify-center">
                            Donate Now!
                        </a>
                    </div>
                </div>
            </div>

            <!-- Reasons to Support section with FONT AWESOME ICONS and GLOW EFFECT -->
            <div class="bg-transparent py-16 px-4">
                <div class="container mx-auto text-center">
                    <h2 class="bebas-neue text-4xl md:text-5xl font-bold text-white mb-12">
                        Why Your Support Matters
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">

                        <!-- Reason 1: Israel Trip (Airplane Icon) -->
                        <div class="feature-card p-8 rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 glow-card">
                            <div class="flex justify-center mb-4">
                                <!-- Font Awesome Airplane Icon for Travel -->
                                <i class="fa-solid fa-plane-departure text-5xl" style="color: var(--accent);"></i>
                            </div>
                            <h3 class="bebas-neue text-2xl font-bold text-white mb-2">A Trip of a Lifetime</h3>
                            <p class="text-gray-200" style="color: var(--text-muted);">Your contribution will directly fund the senior trip to Israel, making this once-in-a-lifetime journey possible for every student.</p>
                        </div>

                        <!-- Reason 2: Ma'aser Money (Piggy Bank Icon - Unchanged) -->
                        <div class="feature-card p-8 rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 glow-card">
                            <div class="flex justify-center mb-4">
                                <!-- Font Awesome Piggy Bank Icon for Fund/Ma'aser -->
                                <i class="fa-solid fa-piggy-bank text-5xl" style="color: var(--accent);"></i>
                            </div>
                            <h3 class="bebas-neue text-2xl font-bold text-white mb-2">Ma'aser Money </h3>
                            <p class="text-gray-200" style="color: var(--text-muted);">Your donation can be made using Ma'aser funds. This is a great way to fulfill the mitzvah of charity while supporting a meaningful cause.</p>
                        </div>

                        <!-- Reason 3: Unforgettable Moments (Star of David Icon) -->
                        <div class="feature-card p-8 rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 glow-card">
                            <div class="flex justify-center mb-4">
                                <!-- Font Awesome Star of David Icon for Israel connection/Moments -->
                                <i class="fa-solid fa-star-of-david text-5xl" style="color: var(--accent);"></i>
                            </div>
                            <h3 class="bebas-neue text-2xl font-bold text-white mb-2">Unforgettable Moments</h3>
                            <p class="text-gray-200" style="color: var(--text-muted);">We aim to create memorable senior events and graduation celebrations that will be cherished for a lifetime.</p>
                        </div>
                    </div>

                    <!-- New Donation Affordability Text -->
                    <div class="mt-16 max-w-3xl mx-auto p-6 support-panel rounded-xl shadow-inner">
                        <p class="text-lg font-semibold mb-2" style="color: var(--accent-alt);">Ensuring Every Student Can Attend</p>
                        <p class="text-gray-300" style="color: var(--text-muted);">
                            A primary reason we need your generous donations is to cover the full costs of the trip and events, ensuring that financial constraints do not prevent any student from participating. Your support directly funds scholarships and subsidies for students who cannot afford the full cost, making this milestone year inclusive for the entire graduating class.
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Placeholder Pages - These will NOT be displayed unless specifically navigated to by a direct URL load of this file -->
        <section id="leaderboard" class="page-content py-16">
            <div class="container mx-auto text-center p-4" style="background: var(--surface); border-radius: 1.5rem; box-shadow: 0 25px 55px rgba(9, 5, 30, 0.55); border: 1px solid rgba(255, 255, 255, 0.1);">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold mb-6" style="color: var(--accent-alt);">Leaderboard </h2>
                <p class="text-lg md:text-xl mb-8" style="color: var(--text-muted);">
                    See who's leading the charge in supporting the Hillel Senior Fund! The top supporters will be listed here.
                </p>
                <div class="p-8 rounded-xl shadow-inner" style="background: var(--surface-strong); border: 1px solid rgba(255, 255, 255, 0.08);">
                    <p class="text-xl" style="color: var(--text-muted);">Loading current rankings...</p>
                    <img src="https://placehold.co/600x200/1f2937/d1d5db?text=Ranking+Table+Placeholder" alt="Leaderboard graphic" class="mx-auto rounded-lg shadow-xl mt-6">
                </div>
            </div>
        </section>

        <section id="split" class="page-content py-16">
            <div class="container mx-auto text-center p-4" style="background: var(--surface); border-radius: 1.5rem; box-shadow: 0 25px 55px rgba(9, 5, 30, 0.55); border: 1px solid rgba(255, 255, 255, 0.1);">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold mb-6" style="color: var(--accent-alt);">Split the Pot</h2>
                <p class="text-lg md:text-xl mb-8" style="color: var(--text-muted);">
                    Get ready for our exciting raffle! More details coming soon on how to win big while supporting a great cause.
                </p>
                <img src="https://placehold.co/600x400/1f2937/d1d5db?text=Split+the+Pot+Details" alt="Split the Pot graphic" class="mx-auto rounded-lg shadow-xl">
            </div>
        </section>

        <section id="spin" class="page-content py-16">
            <div class="container mx-auto text-center p-4" style="background: var(--surface); border-radius: 1.5rem; box-shadow: 0 25px 55px rgba(9, 5, 30, 0.55); border: 1px solid rgba(255, 255, 255, 0.1);">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold mb-6" style="color: var(--accent-alt);">Rolex Raffle</h2>
                <p class="text-lg md:text-xl mb-8" style="color: var(--text-muted);">
                    Try your luck with our virtual spin wheel! You could win amazing prizes just for donating.
                </p>
                <img src="https://placehold.co/600x400/1f2937/d1d5db?text=Spin+the+Wheel+Graphic" alt="Rolex Raffle graphic" class="mx-auto rounded-lg shadow-xl">
            </div>
        </section>

        <section id="donate" class="page-content py-16">
            <div class="container mx-auto text-center p-4" style="background: var(--surface); border-radius: 1.5rem; box-shadow: 0 25px 55px rgba(9, 5, 30, 0.55); border: 1px solid rgba(255, 255, 255, 0.1);">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold mb-6" style="color: var(--accent-alt);">Donate Now</h2>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto" style="color: var(--text-muted);">
                    Every donation, big or small, helps us reach our goal. Thank you for your support!
                </p>
                <!-- Donation form/details would go here -->
                <div class="p-8 rounded-xl shadow-xl max-w-lg mx-auto" style="background: var(--surface-strong); border: 1px solid rgba(255, 255, 255, 0.1);">
                    <form>
                        <div class="mb-4">
                            <label for="amount" class="block text-sm font-bold mb-2 text-left" style="color: var(--text-muted);">Donation Amount</label>
                            <input type="number" id="amount" name="amount" placeholder="$100" class="shadow appearance-none rounded w-full py-3 px-4 input-field" />
                        </div>
                        <div class="mb-6">
                            <label for="name" class="block text-sm font-bold mb-2 text-left" style="color: var(--text-muted);">Your Name (Optional)</label>
                            <input type="text" id="name" name="name" placeholder="John Doe" class="shadow appearance-none rounded w-full py-3 px-4 input-field">
                        </div>
                        <button type="submit" class="w-full py-3 rounded-full accent-button font-bold transition-colors duration-300 shadow-lg hover:shadow-xl">
                            Submit Donation
                        </button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="glass-header py-8 mt-auto">
        <div class="container mx-auto px-4 text-center">
            <h3 class="bebas-neue text-3xl font-bold mb-4" style="color: var(--accent-alt);">Contact</h3>
            <!-- Contact section is now fully responsive, stacking on mobile -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 text-gray-400 mb-8">
                <!-- Person 1 -->
                <div class="contact-card">
                    <p class="font-bold text-white">Morris E.</p>
                    <p style="color: var(--text-muted);">+1 (848)-282-6434</p>
                </div>
                <!-- Person 2 -->
                <div class="contact-card">
                    <p class="font-bold text-white">Daniel K.</p>
                    <p style="color: var(--text-muted);">+1 (917) 858-0904</p>
                </div>
                <!-- Person 3 -->
                <div class="contact-card">
                    <p class="font-bold text-white">Saul S.</p>
                    <p style="color: var(--text-muted);">+1 (929)-584-5753</p>
                </div>
            </div>
            <p class="text-sm text-gray-500 mt-8">
                &copy; 2026 Hillel Senior Fund. All Rights Reserved.<br/>
                Website created by <a href="https://setton-source-68177.web.app" target="_blank" class="footer-link transition-colors">Saul Setton</a>
            </p>
        </div>
    </footer>

    <!-- JavaScript for page navigation and Firebase Click Tracking -->
    <script type="module">
        // --- Firebase Imports for Click Tracking ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-functions.js";

        // Firebase Configuration (Replace with your actual configuration)
        const firebaseConfig = {
            apiKey: "AIzaSyBYh2I_TOn9xGW_wxqlfLXpv9-KP501ca0",
            authDomain: "hillel-raffle.firebaseapp.com",
            projectId: "hillel-raffle",
            storageBucket: "hillel-raffle.firebasestorage.app",
            messagingSenderId: "1095480662289",
            appId: "1:1095480662289:web:47b777735eecafb236d4b0"
        };
        
        // Initialize Firebase services
        const app = initializeApp(firebaseConfig);
        const functions = getFunctions(app);

        // --- Referrer Helper Functions ---
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // --- Function to call the Cloud Function ---
        const trackRefClick = async (refId) => {
            try {
                const trackRefLinkClickCallable = httpsCallable(functions, 'trackRefLinkClick');
                // Call the function without waiting for a result
                await trackRefLinkClickCallable({ refId }); 
                console.log(`[Referral Tracking] Click tracked successfully for refId: ${refId}`);
            } catch (error) {
                // Log errors silently, as this is a background task and shouldn't interrupt the user
                console.error(`[Referral Tracking] Failed to track click for ${refId}:`, error);
            }
        };

        // Function now targets ALL internal relative links for referral ID injection
        function updateNavLinks(refId) {
            if (!refId) return;

            // Select all anchor tags whose 'href' starts with a slash (i.e., internal relative links)
            const allLinks = document.querySelectorAll('a[href^="/"]');
            
            allLinks.forEach(link => {
                const currentHref = link.getAttribute('href');
                
                // Ensure the link hasn't already had the refId appended
                if (currentHref && !currentHref.includes('ref=')) { 
                    const separator = currentHref.includes('?') ? '&' : '?';
                    // Append the referral ID
                    link.setAttribute('href', `${currentHref}${separator}ref=${refId}`);
                }
            });
        }
        // --- END Referrer Helper Functions ---

        // Simple function to ensure only the desired page is active
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            const activePage = document.getElementById(pageId);
            if (activePage) {
                activePage.classList.add('active');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            
            // Mobile Menu Toggle Logic
            const menuToggle = document.getElementById('menu-toggle');
            const mainMenu = document.getElementById('main-menu');

            menuToggle.addEventListener('click', () => { 
                mainMenu.classList.toggle('hidden'); 
                document.body.classList.toggle('overflow-hidden'); // Disable background scroll
            });

            // Referral tracking logic
            const referrerRefId = getQueryParam('ref');
            
            if (referrerRefId) {
                const sessionKey = `REF_CLICK_TRACKED_${referrerRefId}`;

                console.log('Referrer ID found on index page:', referrerRefId);
                
                // --- Check sessionStorage to prevent duplicate tracking ---
                if (sessionStorage.getItem(sessionKey) === 'true') {
                    console.log(`[Referral Tracking] Click already tracked for this session (${referrerRefId}). Skipping call.`);
                } else {
                    // 1. Track the click immediately and silently
                    trackRefClick(referrerRefId); 

                    // 2. Set session storage flag to prevent re-tracking on reload/navigation
                    sessionStorage.setItem(sessionKey, 'true');
                }
                // 3. Update all outgoing links with the refId
                updateNavLinks(referrerRefId); 
            }

            // Only show the home page. All other navigation will be a full browser redirect.
            showPage('home');
        });
    </script>
</body>
</html>
