<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VY17C4ZK69"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-VY17C4ZK69');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YDE Senior Fund</title>
    <meta name="description" content="Support the YDE Senior Fund - Help us create unforgettable experiences for the Class of 2026 with your generous donations.">
    <meta name="keywords" content="YDE, Senior Fund, Donate, Class of 2026">
    <meta name="author" content="Saul Setton">
    <link rel="icon" type="image/png" href="/favicon/favicon.jpeg">
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMDJ4yF2Y2gqYhFhR41d3yJ4Q7I9X7T7b4F8b4K4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w4F4w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Apply background gradient from the preferred styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1222;
            background-image: linear-gradient(135deg, #0d1222 0%, #151a2d 100%);
        }
        .bebas-neue {
            font-family: 'Bebas Neue', sans-serif;
        }
        /* SPA content switching: Only 'home' is expected to be visible in this mode */
        .page-content {
            display: none;
        }
        .page-content.active {
            display: block;
        }
        /* Mobile-first adjustment for header navigation for full-width links */
        @media (max-width: 767px) {
            #main-menu li {
                width: 100%; /* Make list items take full width on mobile */
            }
            #main-menu li a {
                text-align: center;
                padding: 0.75rem 1rem; /* Add padding for touch targets */
            }
        }

        /* Custom "Juice" - Glow effect on hover for the cards */
        .glow-card:hover {
            box-shadow: 0 0 25px rgba(251, 191, 36, 0.5); /* Stronger yellow glow */
        }
    </style>
</head>
<body class="text-white min-h-screen flex flex-col">

    <!-- Header (Updated with mobile toggle and glass effect) -->
    <header class="bg-black/40 py-4 px-4 md:px-12 fixed w-full top-0 z-50 shadow-2xl backdrop-blur-sm">
        <nav class="container mx-auto flex justify-between items-center flex-wrap md:flex-nowrap">
            <div class="flex items-center justify-between w-full md:w-auto">
                <!-- Logo: Increased touch target and added ring for visual pop -->
                <a href="/" class="flex items-center space-x-2">
                    <img src="https://raw.githubusercontent.com/ToratYosef/ToratYosef..github.io/refs/heads/main/assets/logos.jpeg" alt="YDE Logo" class="h-14 sm:h-16 md:h-20 w-auto rounded-full ring-2 ring-yellow-400 p-1">
                </a>
                <!-- Mobile Menu Toggle Button -->
                <button id="menu-toggle" class="md:hidden text-white focus:outline-none" aria-label="Toggle menu">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>

            <!-- Navigation Links (Toggable on mobile, always visible on desktop) -->
            <ul id="main-menu" class="hidden md:flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-8 text-base font-semibold w-full md:w-auto mt-4 md:mt-0">
                <li><a href="/split-the-pot/" class="text-white hover:text-yellow-400 transition-colors duration-300 block">Split the Pot</a></li>
                <li><a href="/rolex-raffle/" class="text-white hover:text-yellow-400 transition-colors duration-300 block">Rolex Raffle</a></li>
                <!-- NEW Leaderboard Link -->
                <li><a href="/leaderboard/" class="text-white hover:text-yellow-400 transition-colors duration-300 block">Leaderboard</a></li>
                <!-- Donate button styling updated for block display on mobile -->
                <li><a href="/donate/" class="py-2 px-4 rounded-full bg-yellow-400 text-black hover:bg-yellow-500 transition-colors duration-300 font-bold block">Donate Now</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content Container -->
    <main class="flex-grow pt-24">
        
        <!-- Home Page (Only this page is active on the root URL) -->
        <section id="home" class="page-content active">
            <!-- UPDATED: Changed height to h-screen for full viewport height -->
            <div class="relative bg-cover bg-center h-screen min-h-[600px]" style="background-image: url('https://raw.githubusercontent.com/ToratYosef/ToratYosef..github.io/refs/heads/main/assets/kotel.jpg');">
                <!-- Overlay re-added to darken image for text visibility -->
                <div class="absolute inset-0 bg-slate-950 opacity-60"></div>
                
                <div class="relative z-10 flex flex-col items-center justify-center h-full text-center p-4">
                    <h1 class="bebas-neue text-4xl sm:text-5xl md:text-6xl lg:text-8xl font-bold text-white mb-4 drop-shadow-lg">
                        Support the YDE Senior Fund
                    </h1>
                    <p class="text-lg md:text-2xl text-white mb-8 max-w-2xl">
                        Join us in building a bright future for the Class of 2026. Your generous contribution makes a world of difference.
                    </p>
                    
                    <!-- New Button Header/CTA -->
                    <h2 class="bebas-neue text-2xl sm:text-3xl font-bold text-yellow-400 mb-6 drop-shadow-md">
                        Choose How You Support Our Seniors:
                    </h2>
                    
                    <!-- Dual Buttons for Spin and Split the Pot - Outline and Centered -->
                    <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-6">
                        <!-- Rolex Raffle Button - Updated with flexbox for perfect centering -->
                        <a id="spin-action-button" href="/rolex-raffle/" 
                            class="w-full sm:w-60 py-4 px-8 md:text-lg lg:text-xl rounded-full 
                                   bg-transparent border-2 border-yellow-400 text-white font-bold 
                                   shadow-lg transform transition-all duration-300 hover:scale-105 
                                   hover:bg-yellow-400 hover:text-slate-950
                                   flex items-center justify-center">
                            Rolex Raffle
                        </a>
                        <!-- Buy Split The Pot Tickets Button - Updated with flexbox for perfect centering -->
                        <a id="split-action-button" href="/donate/" 
                            class="w-full sm:w-60 py-4 px-8 md:text-lg lg:text-xl rounded-full 
                                   bg-transparent border-2 border-yellow-400 text-white font-bold 
                                   shadow-lg transform transition-all duration-300 hover:scale-105 
                                   hover:bg-yellow-400 hover:text-slate-950
                                   flex items-center justify-center">
                            Donate Now!
                        </a>
                    </div>
                </div>
            </div>

            <!-- Reasons to Support section with FONT AWESOME ICONS and GLOW EFFECT -->
            <div class="bg-transparent py-16 px-4">
                <div class="container mx-auto text-center">
                    <h2 class="bebas-neue text-4xl md:text-5xl font-bold text-white mb-12">
                        Why Your Support Matters
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">
                        
                        <!-- Reason 1: Israel Trip (Airplane Icon) -->
                        <div class="bg-slate-800 p-8 rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 border-b-4 border-yellow-400 glow-card">
                            <div class="flex justify-center mb-4">
                                <!-- Font Awesome Airplane Icon for Travel -->
                                <i class="fa-solid fa-plane-departure text-yellow-400 w-12 h-12 text-5xl"></i>
                            </div>
                            <h3 class="bebas-neue text-2xl font-bold text-white mb-2">A Trip of a Lifetime</h3>
                            <p class="text-gray-200">Your contribution will directly fund the senior trip to Israel, making this once-in-a-lifetime journey possible for every student.</p>
                        </div>
                        
                        <!-- Reason 2: Ma'aser Money (Piggy Bank Icon - Unchanged) -->
                        <div class="bg-slate-800 p-8 rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 border-b-4 border-yellow-400 glow-card">
                            <div class="flex justify-center mb-4">
                                <!-- Font Awesome Piggy Bank Icon for Fund/Ma'aser -->
                                <i class="fa-solid fa-piggy-bank text-yellow-400 w-12 h-12 text-5xl"></i>
                            </div>
                            <h3 class="bebas-neue text-2xl font-bold text-white mb-2">Ma'aser Money</h3>
                            <p class="text-gray-200">Your donation can be made using Ma'aser funds. This is a great way to fulfill the mitzvah of charity while supporting a meaningful cause.</p>
                        </div>
                        
                        <!-- Reason 3: Unforgettable Moments (Star of David Icon) -->
                        <div class="bg-slate-800 p-8 rounded-xl shadow-lg transform transition-transform duration-300 hover:scale-105 border-b-4 border-yellow-400 glow-card">
                            <div class="flex justify-center mb-4">
                                <!-- Font Awesome Star of David Icon for Israel connection/Moments -->
                                <i class="fa-solid fa-star-of-david text-yellow-400 w-12 h-12 text-5xl"></i>
                            </div>
                            <h3 class="bebas-neue text-2xl font-bold text-white mb-2">Unforgettable Moments</h3>
                            <p class="text-gray-200">We aim to create memorable senior events and graduation celebrations that will be cherished for a lifetime.</p>
                        </div>
                    </div>

                    <!-- New Donation Affordability Text -->
                    <div class="mt-16 max-w-3xl mx-auto p-6 bg-slate-900/60 rounded-xl border border-yellow-400/50 shadow-inner">
                        <p class="text-lg text-yellow-200 font-semibold mb-2">Ensuring Every Student Can Attend</p>
                        <p class="text-gray-300">
                            A primary reason we need your generous donations is to cover the full costs of the trip and events, ensuring that financial constraints do not prevent any student from participating. Your support directly funds scholarships and subsidies for students who cannot afford the full cost, making this milestone year inclusive for the entire graduating class.
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Placeholder Pages - These will NOT be displayed unless specifically navigated to by a direct URL load of this file -->
        <section id="leaderboard" class="page-content py-16">
            <div class="container mx-auto text-center p-4 bg-slate-800/80 rounded-2xl shadow-xl max-w-4xl">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold text-yellow-400 mb-6">Leaderboard</h2>
                <p class="text-lg md:text-xl text-gray-300 mb-8">
                    See who's leading the charge in supporting the YDE Senior Fund! The top supporters will be listed here.
                </p>
                <div class="bg-slate-900 p-8 rounded-xl shadow-inner border border-gray-700">
                    <p class="text-xl text-gray-400">Loading current rankings...</p>
                    <img src="https://placehold.co/600x200/1f2937/d1d5db?text=Ranking+Table+Placeholder" alt="Leaderboard graphic" class="mx-auto rounded-lg shadow-xl mt-6">
                </div>
            </div>
        </section>

        <section id="split" class="page-content py-16">
            <div class="container mx-auto text-center p-4 bg-slate-800/80 rounded-2xl shadow-xl max-w-4xl">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold text-yellow-400 mb-6">Split the Pot</h2>
                <p class="text-lg md:text-xl text-gray-300 mb-8">
                    Get ready for our exciting raffle! More details coming soon on how to win big while supporting a great cause.
                </p>
                <img src="https://placehold.co/600x400/1f2937/d1d5db?text=Split+the+Pot+Details" alt="Split the Pot graphic" class="mx-auto rounded-lg shadow-xl">
            </div>
        </section>

        <section id="spin" class="page-content py-16">
            <div class="container mx-auto text-center p-4 bg-slate-800/80 rounded-2xl shadow-xl max-w-4xl">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold text-yellow-400 mb-6">Rolex Raffle</h2>
                <p class="text-lg md:text-xl text-gray-300 mb-8">
                    Try your luck with our virtual spin wheel! You could win amazing prizes just for donating.
                </p>
                <img src="https://placehold.co/600x400/1f2937/d1d5db?text=Spin+the+Wheel+Graphic" alt="Rolex Raffle graphic" class="mx-auto rounded-lg shadow-xl">
            </div>
        </section>

        <section id="donate" class="page-content py-16">
            <div class="container mx-auto text-center p-4 bg-slate-800/80 rounded-2xl shadow-xl max-w-4xl">
                <h2 class="bebas-neue text-4xl md:text-5xl lg:text-6xl font-bold text-yellow-400 mb-6">Donate Now</h2>
                <p class="text-lg md:text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
                    Every donation, big or small, helps us reach our goal. Thank you for your support!
                </p>
                <!-- Donation form/details would go here -->
                <div class="bg-slate-900 p-8 rounded-xl shadow-xl max-w-lg mx-auto border-t-4 border-yellow-400">
                    <form>
                        <div class="mb-4">
                            <label for="amount" class="block text-gray-200 text-sm font-bold mb-2 text-left">Donation Amount</label>
                            <input type="number" id="amount" name="amount" placeholder="$100" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-900 leading-tight focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        </div>
                        <div class="mb-6">
                            <label for="name" class="block text-gray-200 text-sm font-bold mb-2 text-left">Your Name (Optional)</label>
                            <input type="text" id="name" name="name" placeholder="John Doe" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-900 leading-tight focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        </div>
                        <button type="submit" class="w-full py-3 rounded-full bg-yellow-400 hover:bg-yellow-500 text-slate-950 font-bold transition-colors duration-300 shadow-lg hover:shadow-xl">
                            Submit Donation
                        </button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-black/40 py-8 mt-auto shadow-[0_-5px_15px_rgba(0,0,0,0.5)]">
        <div class="container mx-auto px-4 text-center">
            <h3 class="bebas-neue text-3xl font-bold text-yellow-400 mb-4">Contact</h3>
            <!-- Contact section is now fully responsive, stacking on mobile -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 text-gray-400 mb-8">
                <!-- Person 1 -->
                <div>
                    <p class="font-bold text-white">Morris E.</p>
                    <p>+1 (848)-282-6434</p>
                </div>
                <!-- Person 2 -->
                <div>
                    <p class="font-bold text-white">Daniel K.</p>
                    <p>+1 (917) 858-0904</p>
                </div>
                <!-- Person 3 -->
                <div>
                    <p class="font-bold text-white">Saul S.</p>
                    <p>+1 (929)-584-5753</p>
                </div>
            </div>
            <p class="text-sm text-gray-500 mt-8">
                &copy; 2026 YDE Senior Fund. All Rights Reserved.<br/>
                Website created by <a href="https://setton-source-68177.web.app" target="_blank" class="text-yellow-400 hover:text-yellow-300 transition-colors">Saul Setton</a>
            </p>
        </div>
    </footer>

    <!-- JavaScript for page navigation and Firebase Click Tracking -->
    <script type="module">
        // --- Firebase Imports for Click Tracking ---
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-functions.js";

        // Firebase Configuration (Replace with your actual configuration)
        const firebaseConfig = {
            apiKey: "AIzaSyAT539nr_s2OxHPTAmkxwMpaWt-FiDTgQs",
            authDomain: "yderaffle.firebaseapp.com",
            projectId: "yderaffle",
            storageBucket: "yderaffle.firebasestorage.app",
            messagingSenderId: "967768309102",
            appId: "1:967768309102:web:c89d61a747e8cb941f557f"
        };
        
        // Initialize Firebase services
        const app = initializeApp(firebaseConfig);
        const functions = getFunctions(app);

        // --- Referrer Helper Functions ---
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // --- Function to call the Cloud Function ---
        const trackRefClick = async (refId) => {
            try {
                const trackRefLinkClickCallable = httpsCallable(functions, 'trackRefLinkClick');
                // Call the function without waiting for a result
                await trackRefLinkClickCallable({ refId }); 
                console.log(`[Referral Tracking] Click tracked successfully for refId: ${refId}`);
            } catch (error) {
                // Log errors silently, as this is a background task and shouldn't interrupt the user
                console.error(`[Referral Tracking] Failed to track click for ${refId}:`, error);
            }
        };

        function updateNavLinks(refId) {
            if (!refId) return;

            // Select all links in the header navigation
            const navLinks = document.querySelectorAll('header a');
            
            // Select the action buttons by their new IDs
            const spinActionButton = document.getElementById('spin-action-button');
            const splitActionButton = document.getElementById('split-action-button');

            const allLinks = [...navLinks];
            if (spinActionButton) { allLinks.push(spinActionButton); }
            if (splitActionButton) { allLinks.push(splitActionButton); }

            allLinks.forEach(link => {
                const currentHref = link.getAttribute('href');
                // Check if it's an internal link and not already pointing to a full external URL
                if (currentHref && currentHref.startsWith('/') && !currentHref.includes('ref=')) {
                    const separator = currentHref.includes('?') ? '&' : '?';
                    // Append the referral ID
                    link.setAttribute('href', `${currentHref}${separator}ref=${refId}`);
                }
            });
        }
        // --- END Referrer Helper Functions ---

        // Simple function to ensure only the desired page is active
        function showPage(pageId) {
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            const activePage = document.getElementById(pageId);
            if (activePage) {
                activePage.classList.add('active');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            
            // Mobile Menu Toggle Logic
            const menuToggle = document.getElementById('menu-toggle');
            const mainMenu = document.getElementById('main-menu');

            menuToggle.addEventListener('click', () => { 
                mainMenu.classList.toggle('hidden'); 
                document.body.classList.toggle('overflow-hidden'); // Disable background scroll
            });

            // Referral tracking logic
            const referrerRefId = getQueryParam('ref');
            
            if (referrerRefId) {
                const sessionKey = `REF_CLICK_TRACKED_${referrerRefId}`;

                console.log('Referrer ID found on index page:', referrerRefId);
                
                // --- Check sessionStorage to prevent duplicate tracking ---
                if (sessionStorage.getItem(sessionKey) === 'true') {
                    console.log(`[Referral Tracking] Click already tracked for this session (${referrerRefId}). Skipping call.`);
                } else {
                    // 1. Track the click immediately and silently
                    trackRefClick(referrerRefId); 

                    // 2. Set session storage flag to prevent re-tracking on reload/navigation
                    sessionStorage.setItem(sessionKey, 'true');
                }
                // 3. Update all outgoing links with the refId
                updateNavLinks(referrerRefId); 
            }

            // Only show the home page. All other navigation will be a full browser redirect.
            showPage('home');
        });
    </script>
</body>
</html>
